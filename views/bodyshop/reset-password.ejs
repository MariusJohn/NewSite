<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Set New Password</title>

  <link rel="stylesheet" href="/css/styles.css" />
  <link rel="stylesheet" href="/css/footer.css" />
  <link rel="stylesheet" href="/css/reset-password.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet" />
</head>

<body class="reset-page">
  <div class="page-wrapper">
    <div class="reset-container">
      <img src="/img/logo.svg" alt="My Car Quote Logo" class="reset-logo" />

      <h2>Set New Password</h2>
      <% if (error) { %><p class="error-msg"><%= error %></p><% } %>

      <form action="/bodyshop/reset-password/<%= token %>" method="POST" class="reset-form">
        <div class="password-container">
            <input type="password" id="new-password" name="password" placeholder="New password" required autocomplete="new-password">
          <span class="password-toggle" onclick="togglePasswordVisibility(this)">👁️</span>
        </div>

        <div class="password-container">
          <input type="password"  id="confirm-password" name="confirmPassword" placeholder="Confirm new password" required autocomplete="new-password"/>
          <span class="password-toggle" onclick="togglePasswordVisibility(this)">👁️</span>
        </div>

        <button type="submit">Update Password</button>
      </form>

      <p><a href="/bodyshop/login">Back to Login</a></p>
    </div>

    <%- include('../partials/footer') %>
  </div>

  <script src="/js/navbar-toggle.js"></script>
  <script>
    function togglePasswordVisibility(el) {
      const input = el.previousElementSibling;
      input.type = input.type === 'password' ? 'text' : 'password';
      el.textContent = input.type === 'password' ? '👁️' : '🙈';
    }
  </script>
</body>
</html>
